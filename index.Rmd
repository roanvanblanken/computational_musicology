---
title: "Computational Musicology - Final Portfolio"
author: "Roan van Blanken"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    self_contained: false
---

```{r setup, include=FALSE}
library(flexdashboard)
library(spotifyr)
library(purrr)
library(dplyr)
library(ggplot2)
library(plotly)
library(tidyverse)
library(compmus)
```

Unlocking the Secrets of my musical taste
=====================================

Column {data-width=500}
-----------------------------------------------------------------------

Music is an essential part of many people's lives, and with digital music streaming platforms like Spotify, discovering new music has become more accessible than ever. Spotify's algorithm suggests playlists based on users' listening habits and preferences. One of the most popular playlists on Spotify is "New Music Friday," updated every week with new releases from various artists. It is curated by Spotify's editorial team, who select the latest and most popular releases from various genres. However, the question remains: how accurately does this playlist align with personal musical taste and style?

This final portfolio explores the inner workings of Spotify's music recommendation algorithm, attempting to create a predictive model that accurately predicts a user's preferred musical genres and styles. The analysis will focus on two playlists - "Songs I Like" and "Songs I Dislike" - to identify patterns in personal musical taste. The "Songs I Like" playlist is a collection of songs that hold personal meaning, representing various genres such as pop, 70s, 80s, 90s musical, and rock. In contrast, the "Songs I Dislike" playlist consists of heavy metal and drill rap songs that do not match personal taste.

By analyzing the features of songs in both playlists, this portfolio aims to provide insights into personal musical preferences and use this information to train a machine learning model. The goal is to create a predictive model that accurately predicts preferred musical genres and styles. Additionally, the analysis will investigate whether this model can predict which songs from popular playlists like "New Music Friday" would resonate with the user, allowing for a more personalized and tailored listening experience.

In summary, this portfolio tries to offer an understanding of Spotify's music recommendation algorithm and the potential for using machine learning to predict a user's preferred musical genres and styles.

Column {data-width=250}
-----------------------------------------------------------------------

<iframe src="https://open.spotify.com/embed/playlist/6pl0C7qbIl5uoY3Tdf82oa?utm_source=generator" width="100%" height="100%" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>


Column {data-width=250}
-----------------------------------------------------------------------

<iframe src="https://open.spotify.com/embed/playlist/4bJQX5w7W4wEnHLmWqUIVY?utm_source=generator&theme=0" width="100%" height="100%" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>

What are the features that make songs likable? {.storyboard}
=====================================

### Plot 1

```{r}
my_faves <- get_playlist_audio_features("", "6pl0C7qbIl5uoY3Tdf82oa")

# Start with modes
my_faves <- my_faves %>%
  mutate(mode = ifelse(mode == 0, "Minor", "Major"))

# Create the scatterplot
my_faves %>%
  ggplot(aes(x = valence, y = energy, size = loudness, color = mode)) +
  geom_point() +
  geom_rug(linewidth = 0.1) +
  scale_x_continuous(limits = c(0, 1), breaks = c(0, 0.50, 1), minor_breaks = NULL) +
  scale_y_continuous(limits = c(0, 1), breaks = c(0, 0.50, 1), minor_breaks = NULL) +
  scale_color_brewer(type = "qual", palette = "Paired", name = "Mode") +
  scale_size_continuous(trans = "exp", guide = "none") +
  theme_light() +
  labs(x = "Valence", y = "Energy",
       title = "My Favorite Tracks",
       subtitle = "Plotting valence, energy, and loudness",
       caption = "Data source: Spotify API\nAuthor: Roan van Blanken")
```

### Plot 2

```{r}

# Get playlists
my_faves <- get_playlist_audio_features("", "6pl0C7qbIl5uoY3Tdf82oa")
soft_10s <- get_playlist_audio_features("", "37i9dQZF1DX1uHCeFHcn8X")

# Create the density plot
ggplot() +
  geom_density(aes(x = valence, color = "My Favorites"), data = my_faves, fill = "red", alpha = 0.5) +
  geom_density(aes(x = valence, color = "Soft 10s"), data = soft_10s, fill = "purple", alpha = 0.5) +
  scale_color_manual(values = c("My Favorites" = "red", "Soft 10s" = "purple")) +
  theme_light() +
  labs(x = "Valence", y = "Density",
       title = "Valence Distribution of My Favorite Tracks and Soft 10s",
       subtitle = "Based on Spotify audio features",
       caption = "Data source: Spotify API\nAuthor: Roan van Blanken") +
  guides(color = guide_legend(override.aes = list(fill = c("red", "orchid")))) 
```

### Plot 3

```{r}

# Get playlists
songs_i_like <- get_playlist_audio_features("", "6pl0C7qbIl5uoY3Tdf82oa")
songs_i_dislike <- get_playlist_audio_features("", "4bJQX5w7W4wEnHLmWqUIVY")

# Create the density plot
plot1 <- ggplot() +
  geom_density(aes(x = speechiness, color = "Songs I like"), data = songs_i_like, fill = "lightblue", alpha = 0.5) +
  geom_density(aes(x = speechiness, color = "Songs I dislike"), data = songs_i_dislike, fill = "lightpink", alpha = 0.5) +
  scale_color_manual(values = c("Songs I like" = "lightblue", "Songs I dislike" = "lightpink")) +
  theme_light() +
  labs(x = "Speechiness", y = "Density",
       title = "Speechiness Distribution of My Favorite Tracks and Songs I dislike",
       subtitle = "Based on Spotify audio features",
       caption = "Data source: Spotify API\nAuthor: Roan van Blanken") +
  guides(color = guide_legend(override.aes = list(fill = c("lightpink", "lightblue"))))

plotly_object1 <- ggplotly(plot1)

plot1
```

### Plot 4

```{r}

# Create the scatter plot
plot2 <- ggplot() +
  geom_point(aes(x = instrumentalness, y = energy, color = "Songs I like"), data = songs_i_like, alpha = 0.5) +
  geom_point(aes(x = instrumentalness, y = energy, color = "Songs I dislike"), data = songs_i_dislike, alpha = 0.5) +
  scale_color_manual(values = c("Songs I like" = "green", "Songs I dislike" = "orange")) +
  theme_light() +
  labs(x = "Instrumentalness", y = "Energy",
       title = "Instrumentalness and Energy of My Favorite Tracks and Songs I dislike",
       subtitle = "Based on Spotify audio features",
       caption = "Data source: Spotify API\nAuthor: Roan van Blanken")

plotly_object2 <- ggplotly(plot2)

plot2

```
